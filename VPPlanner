import tkinter as tk
from tkinter import messagebox, ttk
from tkcalendar import DateEntry
from datetime import datetime, timedelta

# Funktion för att lägga till ett projekt och rita det som ett Gantt-schema
def add_project():
    project_name = entry_project_name.get()
    start_date = cal_start_date.get_date()
    end_date = cal_end_date.get_date()

    # Kontrollera om alla fält är ifyllda
    if not project_name or not start_date or not end_date:
        messagebox.showwarning("Missing Information", "Please fill in all fields.")
        return

    # Skriv ut informationen om projektet
    print(f"Project Name: {project_name}")
    print(f"Start Date: {start_date}")
    print(f"End Date: {end_date}")

    # Räkna ut antalet dagar mellan start och slutdatum
    delta_days = (end_date - start_date).days

    # Rensa tidigare ritning på canvas
    canvas.delete("project")

    # Skapa ett Gantt-schema för projektet
    cell_height = 40
    start_x = 150
    start_y = 100

    canvas.create_rectangle(start_x, start_y, start_x + delta_days * 20, start_y + cell_height,
                            fill="lightblue", outline="black", tags="project")

# Skapa huvudfönstret
root = tk.Tk()
root.title("Gantt Chart")

# Skapa etiketter och inmatningsfält för att mata in projektinformation
tk.Label(root, text="Project Name:").pack()
entry_project_name = tk.Entry(root)
entry_project_name.pack()

tk.Label(root, text="Start Date:").pack()
cal_start_date = DateEntry(root, width=12, background='darkblue', foreground='white', borderwidth=2)
cal_start_date.pack(pady=5)

tk.Label(root, text="End Date:").pack()
cal_end_date = DateEntry(root, width=12, background='darkblue', foreground='white', borderwidth=2)
cal_end_date.pack(pady=5)

# Skapa en ram för att innehålla Canvas och Scrollbar
frame = tk.Frame(root)
frame.pack(pady=20)

# Skapa en Canvas för att rita Gantt-schemat
canvas = tk.Canvas(frame, width=1000, height=500, bg="white")
canvas.pack(side="left", fill="both", expand=True)

# Skapa en Scrollbar för vertikal scrollning
scrollbar_y = ttk.Scrollbar(frame, orient="vertical", command=canvas.yview)
scrollbar_y.pack(side="right", fill="y")

# Skapa en Scrollbar för horisontell scrollning
scrollbar_x = ttk.Scrollbar(root, orient="horizontal", command=canvas.xview)
scrollbar_x.pack(side="bottom", fill="x")

# Koppla Scrollbar till Canvas
canvas.configure(yscrollcommand=scrollbar_y.set, xscrollcommand=scrollbar_x.set)
canvas.bind("<Configure>", lambda e: canvas.configure(scrollregion=canvas.bbox("all")))

# Rita årtal och kvartal på canvasen
start_year = 2022
for year in range(start_year, start_year + 5):  # Rita 5 år framåt
    for quarter in range(1, 5):  # Kvartal 1 till 4
        x = 150 + (year - start_year) * 400 + quarter * 100
        y = 50
        canvas.create_text(x, y, text=f"Q{quarter}\n{year}", anchor="n")

# Skapa knapp för att lägga till projekt och rita det som ett Gantt-schema
tk.Button(root, text="Add Project", command=add_project).pack(pady=10)

# Starta huvudloopen för applikationen
root.mainloop()
